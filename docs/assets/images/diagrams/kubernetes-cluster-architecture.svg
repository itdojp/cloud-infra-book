<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <title>Kubernetesクラスターアーキテクチャ</title>
  <desc>マスター/ワーカーノード構成、ネットワーキング、ストレージを含むKubernetesクラスターの完全なアーキテクチャ図</desc>
  <defs>
    <style>
      :root {
        --svg-bg: #ffffff;
        --svg-text: #1a1a1a;
        --svg-primary: #0066cc;
        --svg-success: #16a34a;
        --svg-warning: #ca8a04;
        --svg-error: #dc2626;
        --svg-neutral: #6b7280;
      }
      .title-text { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; font-size: 16px; font-weight: 600; fill: var(--svg-text); }
      .node-title { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; font-size: 12px; font-weight: 500; fill: var(--svg-bg); }
      .component-text { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; font-size: 12px; font-weight: 400; fill: var(--svg-text); }
      .annotation-text { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; font-size: 10px; font-weight: 400; fill: var(--svg-neutral); }
      .master-node { fill: var(--svg-primary); stroke: var(--svg-primary); stroke-width: 2; }
      .worker-node { fill: var(--svg-success); stroke: var(--svg-success); stroke-width: 2; }
      .etcd-cluster { fill: var(--svg-warning); stroke: var(--svg-warning); stroke-width: 2; }
      .network-layer { fill: var(--svg-error); stroke: var(--svg-error); stroke-width: 2; }
      .api-flow { stroke: var(--svg-primary); stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .network-flow { stroke: var(--svg-success); stroke-width: 1; stroke-dasharray: 3,3; fill: none; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="var(--svg-primary)"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" class="title-text" text-anchor="middle">Kubernetesクラスターアーキテクチャ</text>

  <!-- Control Plane (Master Nodes) -->
  <g id="control-plane">
    <rect x="60" y="60" width="320" height="200" class="master-node" rx="4"/>
    <text x="220" y="80" class="node-title" text-anchor="middle">Control Plane (マスターノード)</text>
    
    <!-- API Server -->
    <rect x="80" y="90" width="80" height="50" fill="var(--svg-bg)" stroke="var(--svg-primary)" stroke-width="1" rx="4"/>
    <text x="120" y="110" class="component-text" text-anchor="middle" font-weight="500">API Server</text>
    <text x="90" y="125" class="annotation-text">• REST API</text>
    <text x="90" y="135" class="annotation-text">• 認証/認可</text>
    
    <!-- Controller Manager -->
    <rect x="180" y="90" width="80" height="50" fill="var(--svg-bg)" stroke="var(--svg-primary)" stroke-width="1" rx="4"/>
    <text x="220" y="110" class="component-text" text-anchor="middle" font-weight="500">Controller</text>
    <text x="220" y="123" class="component-text" text-anchor="middle" font-weight="500">Manager</text>
    <text x="190" y="135" class="annotation-text">• レプリケーション</text>
    
    <!-- Scheduler -->
    <rect x="280" y="90" width="80" height="50" fill="var(--svg-bg)" stroke="var(--svg-primary)" stroke-width="1" rx="4"/>
    <text x="320" y="110" class="component-text" text-anchor="middle" font-weight="500">Scheduler</text>
    <text x="290" y="125" class="annotation-text">• Pod配置</text>
    <text x="290" y="135" class="annotation-text">• リソース管理</text>
    
    <!-- Cloud Controller Manager -->
    <rect x="130" y="150" width="100" height="40" fill="var(--svg-bg)" stroke="var(--svg-primary)" stroke-width="1" rx="4"/>
    <text x="180" y="165" class="component-text" text-anchor="middle" font-weight="500">Cloud Controller</text>
    <text x="140" y="180" class="annotation-text">• クラウド統合</text>
  </g>

  <!-- etcd Cluster -->
  <g id="etcd-cluster">
    <rect x="80" y="210" width="280" height="40" class="etcd-cluster" rx="4"/>
    <text x="220" y="225" class="node-title" text-anchor="middle">etcd クラスター</text>
    <text x="220" y="240" class="annotation-text" text-anchor="middle">分散KVストア・設定データ・状態管理</text>
  </g>

  <!-- Worker Nodes -->
  <g id="worker-nodes">
    <!-- Worker Node 1 -->
    <rect x="420" y="60" width="150" height="190" class="worker-node" rx="4"/>
    <text x="495" y="80" class="node-title" text-anchor="middle">Worker Node 1</text>
    
    <rect x="435" y="90" width="120" height="30" fill="var(--svg-bg)" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="495" y="105" class="component-text" text-anchor="middle">kubelet</text>
    <text x="495" y="115" class="annotation-text" text-anchor="middle">Pod管理</text>
    
    <rect x="435" y="125" width="120" height="30" fill="var(--svg-bg)" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="495" y="140" class="component-text" text-anchor="middle">kube-proxy</text>
    <text x="495" y="150" class="annotation-text" text-anchor="middle">ネットワーク</text>
    
    <rect x="435" y="160" width="120" height="30" fill="var(--svg-bg)" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="495" y="175" class="component-text" text-anchor="middle">Container Runtime</text>
    <text x="495" y="185" class="annotation-text" text-anchor="middle">Docker/containerd</text>
    
    <rect x="435" y="195" width="120" height="45" fill="var(--svg-bg)" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="495" y="210" class="component-text" text-anchor="middle">Pods</text>
    <text x="445" y="225" class="annotation-text">• App Containers</text>
    <text x="445" y="235" class="annotation-text">• Sidecar Containers</text>
    
    <!-- Worker Node 2 -->
    <rect x="590" y="60" width="150" height="190" class="worker-node" rx="4"/>
    <text x="665" y="80" class="node-title" text-anchor="middle">Worker Node 2</text>
    
    <rect x="605" y="90" width="120" height="30" fill="var(--svg-bg)" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="665" y="105" class="component-text" text-anchor="middle">kubelet</text>
    <text x="665" y="115" class="annotation-text" text-anchor="middle">Pod管理</text>
    
    <rect x="605" y="125" width="120" height="30" fill="var(--svg-bg)" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="665" y="140" class="component-text" text-anchor="middle">kube-proxy</text>
    <text x="665" y="150" class="annotation-text" text-anchor="middle">ネットワーク</text>
    
    <rect x="605" y="160" width="120" height="30" fill="var(--svg-bg)" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="665" y="175" class="component-text" text-anchor="middle">Container Runtime</text>
    <text x="665" y="185" class="annotation-text" text-anchor="middle">Docker/containerd</text>
    
    <rect x="605" y="195" width="120" height="45" fill="var(--svg-bg)" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="665" y="210" class="component-text" text-anchor="middle">Pods</text>
    <text x="615" y="225" class="annotation-text">• App Containers</text>
    <text x="615" y="235" class="annotation-text">• Sidecar Containers</text>
  </g>

  <!-- Networking Layer -->
  <g id="networking">
    <rect x="80" y="280" width="640" height="100" class="network-layer" rx="4"/>
    <text x="400" y="300" class="node-title" text-anchor="middle">ネットワーキング層</text>
    
    <!-- Service -->
    <rect x="100" y="310" width="90" height="50" fill="var(--svg-bg)" stroke="var(--svg-error)" stroke-width="1" rx="4"/>
    <text x="145" y="330" class="component-text" text-anchor="middle" font-weight="500">Service</text>
    <text x="110" y="345" class="annotation-text">• ClusterIP</text>
    <text x="110" y="355" class="annotation-text">• NodePort</text>
    
    <!-- Ingress -->
    <rect x="210" y="310" width="90" height="50" fill="var(--svg-bg)" stroke="var(--svg-error)" stroke-width="1" rx="4"/>
    <text x="255" y="330" class="component-text" text-anchor="middle" font-weight="500">Ingress</text>
    <text x="220" y="345" class="annotation-text">• L7 LB</text>
    <text x="220" y="355" class="annotation-text">• SSL終端</text>
    
    <!-- CNI -->
    <rect x="320" y="310" width="90" height="50" fill="var(--svg-bg)" stroke="var(--svg-error)" stroke-width="1" rx="4"/>
    <text x="365" y="330" class="component-text" text-anchor="middle" font-weight="500">CNI Plugin</text>
    <text x="330" y="345" class="annotation-text">• Calico</text>
    <text x="330" y="355" class="annotation-text">• Flannel</text>
    
    <!-- DNS -->
    <rect x="430" y="310" width="90" height="50" fill="var(--svg-bg)" stroke="var(--svg-error)" stroke-width="1" rx="4"/>
    <text x="475" y="330" class="component-text" text-anchor="middle" font-weight="500">CoreDNS</text>
    <text x="440" y="345" class="annotation-text">• Service発見</text>
    <text x="440" y="355" class="annotation-text">• 名前解決</text>
    
    <!-- Network Policy -->
    <rect x="540" y="310" width="90" height="50" fill="var(--svg-bg)" stroke="var(--svg-error)" stroke-width="1" rx="4"/>
    <text x="585" y="330" class="component-text" text-anchor="middle" font-weight="500">Network Policy</text>
    <text x="550" y="345" class="annotation-text">• トラフィック制御</text>
    <text x="550" y="355" class="annotation-text">• セグメント化</text>
  </g>

  <!-- Storage Layer -->
  <g id="storage">
    <rect x="100" y="400" width="600" height="80" fill="var(--svg-neutral)" fill-opacity="0.05" stroke="var(--svg-text)" stroke-width="2" rx="4"/>
    <text x="400" y="420" class="component-text" text-anchor="middle" font-weight="500">ストレージ層</text>
    
    <!-- Persistent Volumes -->
    <rect x="120" y="430" width="120" height="40" fill="var(--svg-bg)" stroke="var(--svg-neutral)" stroke-width="1" rx="4"/>
    <text x="180" y="445" class="component-text" text-anchor="middle">PersistentVolume</text>
    <text x="180" y="460" class="annotation-text" text-anchor="middle">ストレージ抽象化</text>
    
    <!-- Storage Classes -->
    <rect x="260" y="430" width="120" height="40" fill="var(--svg-bg)" stroke="var(--svg-neutral)" stroke-width="1" rx="4"/>
    <text x="320" y="445" class="component-text" text-anchor="middle">StorageClass</text>
    <text x="320" y="460" class="annotation-text" text-anchor="middle">動的プロビジョニング</text>
    
    <!-- CSI Drivers -->
    <rect x="400" y="430" width="120" height="40" fill="var(--svg-bg)" stroke="var(--svg-neutral)" stroke-width="1" rx="4"/>
    <text x="460" y="445" class="component-text" text-anchor="middle">CSI Driver</text>
    <text x="460" y="460" class="annotation-text" text-anchor="middle">ストレージ統合</text>
    
    <!-- Volume Types -->
    <rect x="540" y="430" width="120" height="40" fill="var(--svg-bg)" stroke="var(--svg-neutral)" stroke-width="1" rx="4"/>
    <text x="600" y="445" class="component-text" text-anchor="middle">Volume Types</text>
    <text x="600" y="460" class="annotation-text" text-anchor="middle">NFS, iSCSI, Cloud</text>
  </g>

  <!-- Add-ons -->
  <g id="addons">
    <rect x="120" y="500" width="560" height="80" fill="var(--svg-primary)" fill-opacity="0.05" stroke="var(--svg-primary)" stroke-width="2" rx="4"/>
    <text x="400" y="520" class="component-text" text-anchor="middle" font-weight="500">必須アドオン</text>
    
    <text x="140" y="540" class="annotation-text" font-weight="500">監視:</text>
    <text x="180" y="540" class="annotation-text">Prometheus + Grafana</text>
    
    <text x="140" y="555" class="annotation-text" font-weight="500">ログ:</text>
    <text x="170" y="555" class="annotation-text">EFK Stack (Elasticsearch, Fluentd, Kibana)</text>
    
    <text x="140" y="570" class="annotation-text" font-weight="500">Service Mesh:</text>
    <text x="215" y="570" class="annotation-text">Istio / Linkerd</text>
    
    <text x="420" y="540" class="annotation-text" font-weight="500">CI/CD:</text>
    <text x="460" y="540" class="annotation-text">ArgoCD / Flux</text>
    
    <text x="420" y="555" class="annotation-text" font-weight="500">セキュリティ:</text>
    <text x="490" y="555" class="annotation-text">Falco / OPA</text>
    
    <text x="420" y="570" class="annotation-text" font-weight="500">バックアップ:</text>
    <text x="490" y="570" class="annotation-text">Velero</text>
  </g>

  <!-- Connection flows -->
  <path d="M 380 110 L 420 110" class="api-flow"/>
  <path d="M 220 150 L 220 210" class="api-flow"/>
</svg>